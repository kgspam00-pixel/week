<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Valentine’s Day</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Inter:wght@300;400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../style.css" />

<style>
.quiz-box {
  margin-top: 30px;
  text-align: center;
}

.quiz-question {
  font-size: 22px;
  margin-bottom: 24px;
}

.quiz-options button {
  margin: 10px;
}

.reaction {
  margin-top: 18px;
  font-style: italic;
  opacity: 0.8;
}

.hidden {
  display: none;
}

.final-question {
  margin-top: 40px;
  font-size: 28px;
  font-weight: 600;
}

.choices {
  position: relative;
  margin-top: 30px;
  height: 90px;
}

#yesBtn, #noBtn {
  font-size: 16px;
  padding: 12px 26px;
  position: absolute;
}

#yesBtn {
  left: 50%;
  transform: translateX(-110px);
}

#noBtn {
  left: 50%;
  transform: translateX(20px);
}

.after-yes {
  margin-top: 40px;
  font-size: 22px;
  text-align: center;
}
</style>
</head>

<body>

<main class="week">

<!-- LOCKED -->
<section id="locked" style="display:none;">
  <h1>Not yet ❤️</h1>
  <p class="subtitle">
    The best part waits for its moment.
  </p>
</section>

<!-- UNLOCKED -->
<section id="unlocked" style="display:none;">

<h1>Valentine’s Day</h1>

<p class="build">
Over this week, I showed you pieces of how I feel.
</p>

<p class="build">
The softness.  
The laughter.  
The comfort.  
The desire.
</p>

<p class="moment">
But loving you has also been… fun.
</p>

<hr style="margin:40px 0; opacity:.3;">

<div id="quizSection" class="quiz-box">

  <div class="quiz-question" id="questionText"></div>

  <div class="quiz-options">
    <button id="optionA"></button>
    <button id="optionB"></button>
  </div>

  <div class="reaction hidden" id="reactionText"></div>

</div>

<div id="finalSection" class="hidden">

  <p class="moment">
    Jokes aside…
  </p>

  <p class="moment">
    I don’t feel dramatic about you.
  </p>

  <p class="moment">
    I feel steady.
  </p>

  <p class="moment">
    I feel safe.
  </p>

  <p class="moment">
    I feel like I want to keep choosing you.
  </p>

  <p class="final-question">
    So tell me —
  </p>

  <p class="final-question">
    Will you be my Valentine?
  </p>

  <div class="choices">
    <button id="yesBtn">Yes ❤️</button>
    <button id="noBtn">No</button>
  </div>

  <div id="afterYes" class="after-yes hidden">
    I knew it.<br><br>
    I choose you. Always.
  </div>

</div>

</section>
</main>

<script src="../week.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {

  handleDayUnlock("valentine");
  markProgress("valentine");

  const questions = [
    {
      q: "Who blushes first?",
      a: "You pretending you don’t",
      b: "Me, obviously",
      r: "Correct. It’s adorable either way."
    },
    {
      q: "Who replies faster?",
      a: "You, even in meetings",
      b: "You, even in meetings",
      r: "You are painfully consistent."
    },
    {
      q: "Our kisses are…",
      a: "Soft",
      b: "Dangerous",
      r: "Exactly. Both."
    },
    {
      q: "Who overthinks more?",
      a: "Me",
      b: "Still me",
      r: "But you still stay."
    },
    {
      q: "What are we, really?",
      a: "A little chaotic",
      b: "A little perfect",
      r: "That’s the best combination."
    }
  ];

  let index = 0;

  const questionText = document.getElementById("questionText");
  const optionA = document.getElementById("optionA");
  const optionB = document.getElementById("optionB");
  const reaction = document.getElementById("reactionText");
  const quizSection = document.getElementById("quizSection");
  const finalSection = document.getElementById("finalSection");

  function loadQuestion() {
    if (index >= questions.length) {
      quizSection.classList.add("hidden");
      finalSection.classList.remove("hidden");
      return;
    }

    questionText.textContent = questions[index].q;
    optionA.textContent = questions[index].a;
    optionB.textContent = questions[index].b;
    reaction.classList.add("hidden");
  }

  function handleAnswer() {
    reaction.textContent = questions[index].r;
    reaction.classList.remove("hidden");
    index++;
    setTimeout(loadQuestion, 1200);
  }

  optionA.onclick = handleAnswer;
  optionB.onclick = handleAnswer;

  loadQuestion();

  // YES / NO MECHANISM
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const afterYes = document.getElementById("afterYes");

  let triedOnce = false;

  yesBtn.onclick = () => {
    celebrate();
    afterYes.classList.remove("hidden");
    yesBtn.style.display = "none";
    noBtn.style.display = "none";
  };

  noBtn.onclick = () => {
    if (!triedOnce) {
      triedOnce = true;
      noBtn.textContent = "Try again";
    }
  };

  const dodge = () => {
    if (!triedOnce) return;
    noBtn.style.transform =
      `translate(${Math.random()*160 - 80}px,
                 ${Math.random()*60 - 30}px)`;
  };

  noBtn.addEventListener("mouseenter", dodge);
  noBtn.addEventListener("touchstart", dodge);

  function celebrate() {
    for (let i = 0; i < 30; i++) {
      const p = document.createElement("div");
      p.className = "particle";
      p.innerText = Math.random() > 0.5 ? "❤️" : "♡";
      p.style.left = Math.random()*100 + "vw";
      p.style.top = Math.random()*100 + "vh";
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 2000);
    }
  }

});
</script>

</body>
</html>
